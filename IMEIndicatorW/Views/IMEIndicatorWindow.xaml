<Window x:Class="IMEIndicatorClock.Views.IMEIndicatorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:IMEIndicatorClock.ViewModels"
        Title="IME Indicator"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="Manual"
        Left="{Binding PositionX, Mode=TwoWay}"
        Top="{Binding PositionY, Mode=TwoWay}">

    <Grid Width="{Binding Size}" Height="{Binding Size}"
          Background="Transparent"
          MouseLeftButtonDown="Grid_MouseLeftButtonDown"
          MouseRightButtonDown="Grid_MouseRightButtonDown">
        <!-- 外側のグロー効果 -->
        <Ellipse IsHitTestVisible="False">
            <Ellipse.Fill>
                <RadialGradientBrush>
                    <GradientStop Color="Transparent" Offset="0.6"/>
                    <GradientStop Color="{Binding GlowColor.Color}" Offset="1"/>
                </RadialGradientBrush>
            </Ellipse.Fill>
        </Ellipse>

        <!-- メインの円 -->
        <Ellipse Margin="5" Opacity="{Binding Opacity}" IsHitTestVisible="False">
            <Ellipse.Fill>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="{Binding BackgroundColor.Color}" Offset="0"/>
                    <GradientStop Color="{Binding BackgroundColor.Color}" Offset="0.5"/>
                    <GradientStop Color="{Binding BackgroundColor.Color}" Offset="1"/>
                </LinearGradientBrush>
            </Ellipse.Fill>
            <Ellipse.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.3"/>
            </Ellipse.Effect>
        </Ellipse>

        <!-- 白いボーダー -->
        <Ellipse Margin="5" Stroke="White" StrokeThickness="2" Opacity="0.3" IsHitTestVisible="False"/>

        <!-- テキスト -->
        <TextBlock Text="{Binding DisplayText}"
                   FontSize="{Binding FontSize}"
                   FontFamily="{Binding FontFamily}"
                   FontWeight="Bold"
                   Foreground="White"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Margin="0,-2,0,0"
                   IsHitTestVisible="False">
            <TextBlock.Effect>
                <DropShadowEffect BlurRadius="3" ShadowDepth="1" Opacity="0.5"/>
            </TextBlock.Effect>
        </TextBlock>
    </Grid>
</Window>
